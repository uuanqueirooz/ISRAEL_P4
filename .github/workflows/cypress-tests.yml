name: Rodar Testes Cypress

# 1. Gatilho: Roda esta pipeline em todo push para a branch 'main'
on:
  push:
    branches: [ main ]
  # Opcional: Permite rodar manualmente pela aba Actions do GitHub
  workflow_dispatch:

jobs:
  # Nome do job
  cypress-run:
    name: Teste dos Títulos dos Cards
    # 2. Sistema Operacional: Roda em uma máquina virtual Linux (Ubuntu)
    runs-on: ubuntu-latest
    
    steps:
      # 3. Baixa o seu código (exercicio.html, cypress/, etc.) para a máquina virtual
      - name: Fazer checkout do código
        uses: actions/checkout@v4

      # 4. Configura o Node.js para podermos usar o 'npm'
      - name: Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18' # Usar uma versão LTS (Recomendada)
          
      # 5. Instala as dependências do projeto (principalmente o Cypress)
      # (Isso lê o seu 'package.json' e 'package-lock.json')
      - name: Instalar dependências
        run: npm install 
        
      # 6. Roda os testes do Cypress!
      # (Usa a Action oficial do Cypress para facilitar tudo)
      - name: Rodar os testes do Cypress
        uses: cypress-io/github-action@v6
        with:
          # Informa ao Cypress para rodar apenas o arquivo de teste que criamos
          spec: cypress/e2e/verificar-cards.spec.js
          # Não precisamos de 'start' porque estamos testando um arquivo HTML estático